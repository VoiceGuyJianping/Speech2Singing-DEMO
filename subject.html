<html>
    <body>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
             https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
        
      

        <script>
          // Your web app's Firebase configuration
          var firebaseConfig = {
            apiKey: "AIzaSyBi3tcd5MsbSsTUl0oSA6SvksCK0mA3HOI",
            authDomain: "speech2singing.firebaseapp.com",
            databaseURL: "https://speech2singing.firebaseio.com",
            projectId: "speech2singing",
            storageBucket: "speech2singing.appspot.com",
            messagingSenderId: "655101259137",
            appId: "1:655101259137:web:1ab8e624a37d7f98088c80",
            measurementId: "G-G4PTGP351G"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          
          var database = firebase.firestore();
        </script>

        
        <script type="text/javascript">
            
            function myGetItem() {
                var handler = document.getElementsByName("model");
                for(var i=0;i<handler.length;i++) { 
                    if(handler[i].checked) 
                    a = handler[i].value; 
                };

                var handler = document.getElementsByName("ad");
                for(var i=0;i< handler.length;i++) { 
                    if(handler[i].checked) 
                    b = handler[i].value; 
                };

                var handler = document.getElementsByName("vocoder");
                for(var i=0;i< handler.length;i++) { 
                    if(handler[i].checked) 
                    c = handler[i].value; 
                };

                var handler = document.getElementsByName("original");
                for(var i=0;i< handler.length;i++) { 
                    if(handler[i].checked) 
                    d = handler[i].value; 
                };

                var handler = document.getElementsByName("melgan");
                for(var i=0;i< handler.length;i++) { 
                    if(handler[i].checked) 
                    e = handler[i].value; 
                };
                console.log(a)
                console.log(b)
                console.log(c)
                console.log(d)
                console.log(e)
                var washingtonRef = database.collection("data").doc("model");
                if (a == 'A'){
                    // Atomically add a new region to the "regions" array field.
                    washingtonRef.update({
                        A: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if(a=='B'){
                    washingtonRef.update({
                        B: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else{
                    washingtonRef.update({
                        equal: firebase.firestore.FieldValue.increment(1)
                    });
                };

                var washingtonRef = database.collection("data").doc("ad");
                if (b == 'A'){
                    // Atomically add a new region to the "regions" array field.
                    washingtonRef.update({
                        A: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (b=='B'){
                    washingtonRef.update({
                        B: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else{
                    washingtonRef.update({
                        equal: firebase.firestore.FieldValue.increment(1)
                    });
                }

                var washingtonRef = database.collection("data").doc("vocoder");
                if (c == 'A'){
                    // Atomically add a new region to the "regions" array field.
                    washingtonRef.update({
                        A: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (c=='B'){
                    washingtonRef.update({
                        B: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else{
                    washingtonRef.update({
                        equal: firebase.firestore.FieldValue.increment(1)
                    });
                }

                var washingtonRef = database.collection("data").doc("original");
                if (d == 1){
                    // Atomically add a new region to the "regions" array field.
                    washingtonRef.update({
                        1: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (d==2){
                    washingtonRef.update({
                        2: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (d==3){
                    washingtonRef.update({
                        3: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (d==4){
                    washingtonRef.update({
                        4: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (d==5){
                    washingtonRef.update({
                        5: firebase.firestore.FieldValue.increment(1)
                    });
                }
                
                var washingtonRef = database.collection("data").doc("melgan");
                if (e == 1){
                    // Atomically add a new region to the "regions" array field.
                    washingtonRef.update({
                        1: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (e==2){
                    washingtonRef.update({
                        2: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (e==3){
                    washingtonRef.update({
                        3: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (e==4){
                    washingtonRef.update({
                        4: firebase.firestore.FieldValue.increment(1)
                    });
                }
                else if (e==5){
                    washingtonRef.update({
                        5: firebase.firestore.FieldValue.increment(1)
                    });
                }
                window.location.reload()
                        
            };
            
        </script>
        <!-- for random -->
        <script>
            function myGetRandom(min, max) {
                var r = Math.floor(Math.random()*(max-min+1))+min;
                return r
            };
           
            var a = 'B';
            var b = 'B';
            var c = 'B';
            var d = 'B';
            var e = 'B';
            
            console.log('3')
        </script>
        
        <!-- description -->
        <h1>Speech to singing via cycleGAN</h1>
        <p>
            Hi, This is a human evaluation page on speech to singing project.
            Each sample includes one read audio and two singing audios. Our singing audio is generated based on the read. You will be asked to  <i> which audio is more natrual </i> for each sample.
            And everytime you refresh the webpage (or after you press the "submit"), you could get different music samples.
            We would appreciate it if you could help us fill this questionnaire several times. THANKS! <br><br>
        </p> 
        

        <!-- audio contents set 1-->
        <h1 id="header2-1"></h1>
        <script>
            document.getElementById("header2-1").innerHTML = "Speech to Singing sample"; 
        </script>
        
        <div id="audio_content2-1"></div>

        <script>

            var data2 = [
            ['speech2singing/model_architecture/sample2/read.wav', 'speech2singing/model_architecture/sample2/jay.wav', 'speech2singing/model_architecture/sample2/my.wav'],
            ['speech2singing/model_architecture/sample3/read.wav', 'speech2singing/model_architecture/sample3/jay.wav', 'speech2singing/model_architecture/sample3/my.wav']];
            var s = myGetRandom(0, 1);
            var link2_1 = data2[s][0];
            var link2_2 = data2[s][1];
            var link2_3 = data2[s][2];
            document.getElementById("audio_content2-1").innerHTML = '<strong># 1st sample: </strong><br><table><tr> <td style="color:olive;"> Input speech: &emsp; &emsp; </td> <td> <audio controls controlsList="nodownload"><source src="' + link2_1 + '" type="audio/mpeg"></audio> </td> </tr> </td>  <td style="color:olive;"> &emsp; &emsp; &emsp; &emsp; </audio> </td> </tr></table><table><tr> <td style="color:brown;"> <strong> Singing A </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link2_2 + '" type="audio/mpeg"></audio> </td> </tr><tr> <td style="color:brown;"> <strong> Singing B </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link2_3 + '" type="audio/mpeg"></audio> </td> </tr></table><br> <strong>Which one is better:</strong><form><input type="radio" name="model" value="A"> A &nbsp;&nbsp;&nbsp;<input type="radio" name="model" value="B"> B &nbsp;&nbsp;<input type="radio" name="model" value="equal"> equal</form>'
        </script>
         <h1 id="header2-1"></h1>
        
        <script>
            document.getElementById("header2-2")
        </script>
        <div id="audio_content2-2"></div>
        <script>
           var data = [['speech2singing/ad vs mse/sample1/read.wav', 'speech2singing/ad vs mse/sample1/mse.wav', 'speech2singing/ad vs mse/sample1/ad.wav'],
            ['speech2singing/ad vs mse/sample2/read.wav', 'speech2singing/ad vs mse/sample2/mse.wav', 'speech2singing/ad vs mse/sample2/ad.wav'],
            ['speech2singing/ad vs mse/sample3/read.wav', 'speech2singing/ad vs mse/sample3/mse.wav', 'speech2singing/ad vs mse/sample3/ad.wav'],
            ['speech2singing/ad vs mse/sample4/read.wav', 'speech2singing/ad vs mse/sample4/mse.wav', 'speech2singing/ad vs mse/sample4/ad.wav']];
            var ss = myGetRandom(0, 3);
            var link1_1 = data[ss][0];
            var link1_2 = data[ss][1];
            var link1_3 = data[ss][2];
            document.getElementById("audio_content2-2").innerHTML = '<strong># 1st sample</strong><br><table><tr> <td style="color:olive;"> Input speech: &emsp; &emsp; </td> <td> <audio controls controlsList="nodownload"><source src="' + link1_1 + '" type="audio/mpeg"></audio> </td> </tr> </td>  <td style="color:olive;"> &emsp; &emsp; &emsp; &emsp; </audio> </td> </tr></table><table><tr> <td style="color:brown;"> <strong> Singing A </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link1_2 + '" type="audio/mpeg"></audio> </td> </tr><tr> <td style="color:brown;"> <strong> Singing B </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link1_3 + '" type="audio/mpeg"></audio> </td> </tr></table><br> <strong>Which one is better:</strong><form><input type="radio" name="ad" value="A"> A &nbsp;&nbsp;&nbsp;<input type="radio" name="ad" value="B"> B &nbsp;&nbsp;&nbsp; <input type="radio" name="ad" value="equal"> equal</form>'
           
        </script>
        <script>
            document.getElementById("header2-3")
        </script>
        <div id="audio_content2-3"></div>
        <script>
           var data3 = [['speech2singing/vocoder/sample1/griff.wav', 'speech2singing/vocoder/sample1/melgan.wav'],
            ['speech2singing/vocoder/sample2/griff.wav', 'speech2singing/vocoder/sample2/melgan.wav'],
            ['speech2singing/vocoder/sample3/griff.wav', 'speech2singing/vocoder/sample3/melgan.wav'],
            ['speech2singing/vocoder/sample4/griff.wav', 'speech2singing/vocoder/sample4/melgan.wav']];
            
            var sss = myGetRandom(0, 3);
            var link3_2 = data3[sss][0];
            var link3_3 = data3[sss][1];
            document.getElementById("audio_content2-3").innerHTML = '<strong># 1st sample</strong><br><table><tr> </audio> </td> </tr></table><table><tr> <td style="color:brown;"> <strong> Singing A </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link3_2 + '" type="audio/mpeg"></audio> </td> </tr><tr> <td style="color:brown;"> <strong> Singing B </strong>: &emsp; &emsp; </td> <td>  <audio controls controlsList="nodownload"><source src="' + link3_3 + '" type="audio/mpeg"></audio> </td> </tr></table><br> <strong>Which one is better:</strong><form><input type="radio" name="vocoder" value="A"> A  &nbsp;&nbsp;&nbsp;<input type="radio" name="vocoder" value="B"> B &nbsp;&nbsp;&nbsp; <input type="radio" name="vocoder" value="equal"> equal</form>'

        </script>
        <script>
            document.getElementById("header2-4")
        </script>
        <div id="audio_content2-4"></div>
        <script>
            var data4 = [['speech2singing/melgan vocoder/sample1/ori.wav'],
            ['speech2singing/melgan vocoder/sample2/ori.wav'],
            ['speech2singing/melgan vocoder/sample3/ori.wav'],
            ['speech2singing/melgan vocoder/sample4/ori.wav'],
            ['speech2singing/melgan vocoder/sample5/ori.wav']
            ];
            var ssss = myGetRandom(0, 4);
            var link4_1 = data4[ssss];
            document.getElementById("audio_content2-4").innerHTML = '<strong># 4st sample MOS Test</strong><br><table><tr> <audio controls controlsList="nodownload"><source src="' + link4_1 + '" type="audio/mpeg"></audio> </td><form><input type="radio" name="original" value="1"> 1(worst)  &nbsp;&nbsp;&nbsp;<input type="radio" name="original" value="2"> 2 &nbsp;&nbsp;&nbsp; <input type="radio" name="original" value="3"> 3&nbsp;&nbsp;&nbsp;<input type="radio" name="original" value="4"> 4 &nbsp;&nbsp;&nbsp; <input type="radio" name="original" value="5"> 5(best)</form>'
        </script>
        <script>
            document.getElementById("header2-5")
        </script>
        <div id="audio_content2-5"></div>
        <script>
            var data5 = [['speech2singing/melgan vocoder/sample1/melgan.wav'],
            ['speech2singing/melgan vocoder/sample2/melgan.wav'],
            ['speech2singing/melgan vocoder/sample3/melgan.wav'],
            ['speech2singing/melgan vocoder/sample4/melgan.wav'],
            ['speech2singing/melgan vocoder/sample5/melgan.wav']
            ];
            var sssss = myGetRandom(0, 4);
            var link5_1 = data5[sssss];
            document.getElementById("audio_content2-5").innerHTML = '<strong># 5st sample MOS Test</strong><br><table><tr> <audio controls controlsList="nodownload"><source src="' + link5_1 + '" type="audio/mpeg"></audio> </td><form><input type="radio" name="melgan" value="1"> 1(worst)  &nbsp;&nbsp;&nbsp;<input type="radio" name="melgan" value="2"> 2 &nbsp;&nbsp;&nbsp; <input type="radio" name="melgan" value="3"> 3&nbsp;&nbsp;&nbsp;<input type="radio" name="melgan" value="4"> 4 &nbsp;&nbsp;&nbsp; <input type="radio" name="melgan" value="5"> 5(best)</form>'
        </script>
        
           


        <!-- submit button -->
        <p>
            <strong>
                Thank you for your participation. Please press the submit button. <br>
                After you press the button, this page will refresh!
            </strong>
        </p>
        <button type="submit" onclick="myGetItem()">Submit</button>
    </body>
</html>